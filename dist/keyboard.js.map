{"version":3,"sources":["../keyboard.js"],"names":["define","Utils","Loop","keyboard","destroyEverything","clearListeners","document","removeEventListener","handleKey","addListeners","addEventListener","e","keyCode","type","time","keyDown","key","mov","x","y","getMove","dx","dy","Keyboard","onDestroy"],"mappings":";;AAAAA,OAAO,CAAE,OAAF,EAAW,MAAX,CAAP,EAA4B,UAASC,KAAT,EAAgBC,IAAhB,EAAsB;AAC9C;;AAEA,QAAIC,WAAW,EAAf;;AAEA;;;AAGA,aAASC,iBAAT,GAA6B;AACzBC;AACAF,mBAAW,IAAX;AACH;;AAED,aAASE,cAAT,GAA0B;AACtBC,iBAASC,mBAAT,CAA6B,SAA7B,EAAwCC,SAAxC;AACAF,iBAASC,mBAAT,CAA6B,OAA7B,EAAsCC,SAAtC;AACH;;AAED,aAASC,YAAT,GAAwB;AACpBH,iBAASI,gBAAT,CAA0B,SAA1B,EAAqCF,SAArC;AACAF,iBAASI,gBAAT,CAA0B,OAA1B,EAAmCF,SAAnC;AACH;;AAED,aAASA,SAAT,CAAmBG,CAAnB,EAAsB;AAClB,YAAMC,UAAUD,EAAEC,OAAlB;AACA,YAAGD,EAAEE,IAAF,KAAW,SAAd,EAAyB;AACrB,gBAAG,CAACV,SAASS,OAAT,CAAJ,EAAuB;AACnBT,yBAASS,OAAT,IAAoBV,KAAKY,IAAzB;AACH;AACJ,SAJD,MAIO;AACHX,qBAASS,OAAT,IAAoB,CAApB;AACH;AACT;AACK;;AAED,aAASG,OAAT,CAAiBC,GAAjB,EAAsB;AAClB,eAAOb,SAASa,GAAT,CAAP;AACH;;AAED,QAAMC,MAAM,EAACC,GAAE,CAAH,EAAKC,GAAE,CAAP,EAAZ;AACA,aAASC,OAAT,GAAmB;AACf,YAAIC,KAAK,CAAT;AAAA,YAAYC,KAAG,CAAf;AACA,YAAGP,QAAQ,EAAR,KAAeA,QAAQ,EAAR,CAAlB,EAA+B;AAC3BO;AACH;AACD,YAAGP,QAAQ,EAAR,KAAeA,QAAQ,EAAR,CAAlB,EAA+B;AAC3BO;AACH;AACD,YAAGP,QAAQ,EAAR,KAAeA,QAAQ,EAAR,CAAlB,EAA+B;AAC3BM;AACH;AACD,YAAGN,QAAQ,EAAR,KAAeA,QAAQ,EAAR,CAAlB,EAA+B;AAC3BM;AACH;AACDJ,YAAIC,CAAJ,GAAQG,EAAR;AACAJ,YAAIE,CAAJ,GAAQG,EAAR;AACA,eAAOL,GAAP;AACH;;AAED;;;AAGA,aAASM,QAAT,GAAoB,CACnB;;AAEDA,aAASH,OAAT,GAAmBA,OAAnB;;AAEAX;AACAR,UAAMuB,SAAN,CAAgBpB,iBAAhB;;AAEA,WAAOmB,QAAP;AAEH,CAxED","file":"keyboard.js","sourcesContent":["define([ 'utils', 'loop' ], function(Utils, Loop) {\n    'use strict';\n\n    let keyboard = [];\n\n    /**\n     *  FUNCTION DEFINITIONS\n     */\n    function destroyEverything() {\n        clearListeners();\n        keyboard = null;\n    }\n\n    function clearListeners() {\n        document.removeEventListener(\"keydown\", handleKey);\n        document.removeEventListener(\"keyup\", handleKey);\n    }\n\n    function addListeners() {\n        document.addEventListener(\"keydown\", handleKey);\n        document.addEventListener(\"keyup\", handleKey);\n    }\n\n    function handleKey(e) {\n        const keyCode = e.keyCode;\n        if(e.type === \"keydown\") {\n            if(!keyboard[keyCode]) {\n                keyboard[keyCode] = Loop.time;\n            }\n        } else {\n            keyboard[keyCode] = 0;\n        }\n//        e.preventDefault();\n    }\n\n    function keyDown(key) {\n        return keyboard[key];\n    }\n\n    const mov = {x:0,y:0};\n    function getMove() {\n        let dx = 0, dy=0;\n        if(keyDown(87) || keyDown(38)) {\n            dy++;\n        }\n        if(keyDown(83) || keyDown(40)) {\n            dy--;\n        }\n        if(keyDown(65) || keyDown(37)) {\n            dx--;\n        }\n        if(keyDown(68) || keyDown(39)) {\n            dx++;\n        }\n        mov.x = dx;\n        mov.y = dy;\n        return mov;\n    }\n\n    /**\n     *  PUBLIC DECLARATIONS\n     */\n    function Keyboard() {\n    }\n\n    Keyboard.getMove = getMove;\n\n    addListeners();\n    Utils.onDestroy(destroyEverything);\n\n    return Keyboard;\n\n});\n"]}